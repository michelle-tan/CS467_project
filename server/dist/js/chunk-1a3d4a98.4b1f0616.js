(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a3d4a98"],{"114b":function(t,s,e){},"713d":function(t,s,e){"use strict";var a=e("b39d"),i=e.n(a);i.a},"7cb4":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"h4 title-text"},[t._v("Your items:")]),e("hr"),e("b-card",{staticClass:"padded-card"},[e("ItemsTable",{attrs:{cart:t.sessionData.cart}})],1),e("b-card",{staticClass:"padded-card"},[e("PriceSummary",{ref:"priceSummary",attrs:{cart:t.sessionData.cart}})],1),e("b-card",{staticClass:"padded-card"},[e("div",{staticClass:"h4"},[t._v(" Choose a shipping address")]),e("b-container",{attrs:{fluid:""}},[e("b-row",t._l(t.addresses,function(s,a){return e("b-col",{key:a,attrs:{sm:"4"}},[e("b-card",{staticClass:"address-card",class:{"selected-address":t.selectedShipping===a},on:{click:function(s){t.selectedShipping=a}}},[e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",[e("div",{staticClass:"text-justify"},[t._v(" \n                                            "+t._s(s.firstName)+" "+t._s(s.lastName)+"\n                                            "),e("br"),t._v("\n                                            "+t._s(s.street)+"\n                                            "),e("br"),t._v("\n                                            "+t._s(s.city)+", "+t._s(s.state)+" "+t._s(s.zipcode)+"\n                                        ")])])],1)],1)],1)],1)}),1)],1)],1),e("b-card",{staticClass:"padded-card"},[e("div",{staticClass:"h4"},[t._v("Choose a billing address")]),e("b-container",{attrs:{fluid:""}},[e("b-row",t._l(t.addresses,function(s,a){return e("b-col",{key:a,attrs:{sm:"4"}},[e("b-card",{staticClass:"address-card",class:{"selected-address":t.selectedBilling===a},on:{click:function(s){t.selectedBilling=a}}},[e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",[e("div",{staticClass:"text-justify"},[t._v(" \n                                        "+t._s(s.firstName)+" "+t._s(s.lastName)+"\n                                        "),e("br"),t._v("\n                                        "+t._s(s.street)+"\n                                        "),e("br"),t._v("\n                                        "+t._s(s.city)+", "+t._s(s.state)+" "+t._s(s.zipcode)+"\n                                    ")])])],1)],1)],1)],1)}),1)],1)],1),e("b-card",{staticClass:"padded-card"},[e("div",{staticClass:"h4"},[t._v("Payment method")]),e("b-form-group",{attrs:{label:"Credit Card Number (not stored in this demo)"}},[e("b-form-input",{attrs:{type:"number",maxlength:"16",required:""}})],1)],1),e("div",{staticClass:"padded-card"},[e("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showInvalidWarning,callback:function(s){t.showInvalidWarning=s},expression:"showInvalidWarning"}},[t._v(" \n                "+t._s(t.warningMessage)+"\n            ")]),e("b-button",{attrs:{block:""},on:{click:t.submitOrder}},[t._v("\n                    Place Order\n            ")])],1)],1)},i=[],n=e("cebc"),r=e("f499"),c=e.n(r),l=e("75fc"),o=e("bc3a"),d=e.n(o),u=e("890f"),m=e("0759"),h={props:{sessionData:Object},components:{ItemsTable:u["a"],PriceSummary:m["a"]},data:function(){return{addresses:[],selectedBilling:null,selectedShipping:null,taxRate:.05,showInvalidWarning:!1}},created:function(){var t=this;d.a.get(this.$hostname+"/address/"+this.sessionData.userinfo.user_id).then(function(s){console.log(s),200===s.status?t.addresses=Object(l["a"])(s.data):console.log("aww")}).catch(function(t){console.log(t)})},computed:{isOrderValid:function(){return 0!==this.sessionData.cart.length&&(!!this.sessionData.loggedIn&&(null!==this.selectedBilling&&null!==this.selectedShipping))},warningMessage:function(){return 0===this.sessionData.cart.length?"Please add something to your cart!":this.sessionData.loggedIn?null===this.selectedBilling?"Please select a billing address":null===this.selectedShipping?"Please select a shipping address":"":"Please be logged in to perform this action"}},methods:{selectBilling:function(t){this.selectedBilling=t},submitOrder:function(){var t=this;this.isOrderValid||(this.showInvalidWarning=!0),d()({url:this.$hostname+"/orders",method:"POST",data:{cart:this.sessionData.cart.map(function(s,e){return c()(Object(n["a"])({},s,{subtotal:t.$refs.priceSummary.subtotalArray[e],tax:t.$refs.priceSummary.taxArray[e],shipping:t.$refs.priceSummary.shippingArray[e],total:t.$refs.priceSummary.subtotalArray[e]+t.$refs.priceSummary.taxArray[e]+t.$refs.priceSummary.shippingArray[e]}))}),customerDetails:c()({shippingAddress:this.addresses[this.selectedShipping],billingAddress:this.addresses[this.selectedBilling],customer:{id:this.sessionData.userinfo.user_id,username:this.sessionData.userinfo.username}})}}).then(function(s){200===s.status?d.a.delete(t.$hostname+"/cart/all").then(function(s){t.$emit("update:sessionData",{cart:s.data}),t.$router.push("/")}):console.log(s)}).catch(function(t){console.log(t)})}}},p=h,f=(e("ae85"),e("2877")),b=Object(f["a"])(p,a,i,!1,null,null,null);s["default"]=b.exports},"890f":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",t._l(t.cart,function(s){return e("div",{key:s.seller_id},[s.storeInfo?e("div",{staticClass:"h5 title-text"},[t._v("Items from: "+t._s(s.storeInfo.storeName)+" ")]):t._e(),e("b-table",{attrs:{items:s.items,fields:t.fields,fixed:"",responsive:""},scopedSlots:t._u([{key:"item",fn:function(s){return[e("b-container",[e("b-row",{attrs:{"align-h":"start"}},[e("b-col",{attrs:{cols:"6"}},[e("a",{attrs:{href:"/products/item/"+s.item.id}},[e("b-img",{staticClass:"product-thumbnail",attrs:{src:s.item.image}})],1)]),e("b-col",{staticStyle:{padding:"0"},attrs:{cols:"6"}},[e("div",{staticClass:"text-left"},[e("strong",[t._v(" "+t._s(s.item.name)+" ")])])])],1)],1)]}},{key:"qty",fn:function(s){return[t.dynamic?e("div",[e("b-input-group",{staticClass:"mt-3",staticStyle:{padding:"0px",margin:"0px"}},[e("b-input-group-prepend",{staticClass:"hideOnSmallScreen"},[e("b-button",{attrs:{size:"sm"},on:{click:function(e){s.item.qty--,t.updateCart(s.item.qty,s.item.id)}}},[e("font-awesome-icon",{attrs:{size:"xs",icon:"minus"}})],1)],1),e("b-form-input",{staticClass:"dynamicInput",model:{value:s.item.qty,callback:function(e){t.$set(s.item,"qty",e)},expression:"data.item.qty"}}),e("b-input-group-append",{staticClass:"hideOnSmallScreen"},[e("b-button",{attrs:{size:"sm"},on:{click:function(e){s.item.qty++,t.updateCart(s.item.qty,s.item.id)}}},[e("font-awesome-icon",{attrs:{size:"xs",icon:"plus"}})],1)],1)],1)],1):e("div",[t._v("\n                    "+t._s(s.item.qty)+"\n                ")])]}}],null,!0)})],1)}),0)},i=[],n=e("f499"),r=e.n(n),c=(e("20d6"),e("bc3a")),l=e.n(c),o={props:{cart:Array,dynamic:Boolean},data:function(){return{fields:[{key:"item",label:"Item",class:"item-col"},{key:"price",label:"Price",formatter:function(t){return t.toFixed(2)}},{key:"qty",label:"Qty"},{key:"subtotal",label:"Subtotal",formatter:function(t,s,e){return(e.qty*e.price).toFixed(2)}}]}},methods:{updateCart:function(t,s){var e,a;t<1&&(e=this.cart.findIndex(function(t){return a=t.items.findIndex(function(t){return t.id===s}),-1!==a}),this.cart[e].items.splice(a,1),console.log("this.cart[storeIndex].items :",this.cart[e].items),0===this.cart[e].items.length&&(this.cart.splice(e,1),console.log("this.cart",this.cart))),l()({method:"PUT",url:this.$hostname+"/cart",data:{cart:r()(this.cart)}}).then(function(t){}).catch(function(t){console.log("err",t)})}}},d=o,u=(e("713d"),e("2877")),m=Object(u["a"])(d,a,i,!1,null,null,null);s["a"]=m.exports},ae85:function(t,s,e){"use strict";var a=e("114b"),i=e.n(a);i.a},b39d:function(t,s,e){}}]);
//# sourceMappingURL=chunk-1a3d4a98.4b1f0616.js.map