(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-007bc91e"],{9253:function(e,a,t){},dbae:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("b-container",{attrs:{fluid:""}},[t("div",{staticClass:"h2 text-left title-text"},[e._v("Update your information:")]),t("hr"),t("b-row",{attrs:{"align-h":"center"}},[t("b-col",{attrs:{md:"8"}},[t("b-card",[t("b-alert",{attrs:{variant:"danger",show:e.showFailure}},[e._v(e._s(e.failureMessage))]),t("b-form",[e._l(e.formData,function(a,r){return t("div",{key:r},[t("b-form-group",{attrs:{label:e._f("colonize")(e._f("capitalize")(e._f("wordify")(r)))}},[t("b-form-input",{attrs:{type:e._f("inputType")(r),placeholder:a},model:{value:e.formData[r],callback:function(a){e.$set(e.formData,r,a)},expression:"formData[key]"}})],1)],1)}),e.formData.password?t("b-form-group",{attrs:{label:"Re-type password:"}},[t("b-form-input",{attrs:{type:"password",required:""},model:{value:e.repeatPassword,callback:function(a){e.repeatPassword=a},expression:"repeatPassword"}})],1):e._e(),t("b-form-group",{attrs:{label:"Profile Image:"}},[t("b-form-file",{attrs:{placeholder:"Upload profile image...","drop-placeholder":"Drop file here...",accept:"image/*"},model:{value:e.profile_image,callback:function(a){e.profile_image=a},expression:"profile_image"}})],1),t("b-button",{attrs:{type:"button"},on:{click:e.validateFormToShowModal}},[e._v("Update")]),t("b-modal",{attrs:{centered:"",title:"Please provide your current password to proceed"},on:{ok:function(a){return a.preventDefault(),e.handlePasswordCheck(a)}},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[t("b-card",[t("b-alert",{attrs:{variant:"danger",show:e.showFailure}},[e._v(e._s(e.failureMessage))]),t("b-form-group",{attrs:{label:"Current Password"}},[t("b-form-input",{attrs:{type:"password",required:""},model:{value:e.currentPassword,callback:function(a){e.currentPassword=a},expression:"currentPassword"}})],1)],1)],1)],2)],1)],1)],1),t("b-row",[t("b-col")],1)],1)},s=[],o=(t("6b54"),t("f499")),i=t.n(o),n=t("bc3a"),l=t.n(n),u={props:{sessionData:Object},data:function(){return{formData:{username:"",email:"",firstName:"",lastName:"",password:""},profile_image:null,showModal:!1,repeatPassword:null,currentPassword:null,showFailure:!1,failureMessage:""}},created:function(){this.formData.username=this.sessionData.userinfo.username,this.formData.email=this.sessionData.userinfo.email,this.formData.firstName=this.sessionData.userinfo.firstName,this.formData.lastName=this.sessionData.userinfo.lastName},methods:{handlePasswordCheck:function(){var e=this;if(!this.currentPassword)return this.failureMessage="You must provide your current password to proceed...",void(this.showFailure=!0);l()({method:"post",url:this.$hostname+"/login",data:{username:this.sessionData.userinfo.username,password:this.currentPassword}}).then(function(a){200===a.status?e.handleSubmit():(console.log(a),e.failureMessage="Could not verify current password",e.showFailure=!0)}).catch(function(a){e.failureMessage="Something's gone awry, please try again later!",e.showFailure=!0,console.log(a)})},handleSubmit:function(){var e=this,a=new FormData;a.append("formData",i()(this.formData)),a.append("image",this.profile_image),a.append("username",this.sessionData.userinfo.username),l()({method:"post",url:this.$hostname+"/update",headers:{"content-Type":"multipart/form-data"},data:a}).then(function(a){200===a.status?e.$emit("update:sessionData",a.data):(console.log(a),e.failureMessage="Could not update account info",e.showFailure=!0)}).catch(function(a){e.failureMessage="Something's gone awry, please try again later!",e.showFailure=!0,console.log(a)}),console.log(a),this.showModal=!1},validateFormToShowModal:function(){this.formData.password&&this.formData.password!==this.repeatPassword?(this.failureMessage="Please re-type your new password (it may not match)",this.showFailure=!0):(this.showFailure=!1,this.showModal=!0)}},filters:{capitalize:function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},colonize:function(e){return e+":"},wordify:function(e){for(var a=0,t="",r=0;r<e.length;r++)"_"===e[r]||"-"===e[r]?(t+=e.substring(a,r),t+=" ",r++,a=r):e[r]==e.charAt(r).toUpperCase()&&(t+=e.substring(a,r),t+=" ",a=r);return t+=e.substring(a),t},inputType:function(e){return"password"===e?"password":"text"}},computed:{isPasswordProvided:function(){return!!this.formData.currentPassword}}},d=u,c=(t("f6e5"),t("2877")),f=Object(c["a"])(d,r,s,!1,null,null,null);a["default"]=f.exports},f6e5:function(e,a,t){"use strict";var r=t("9253"),s=t.n(r);s.a}}]);
//# sourceMappingURL=chunk-007bc91e.19deaf36.js.map