{"version":3,"sources":["webpack:///./src/views/UpdateAccount.vue?16a6","webpack:///src/views/UpdateAccount.vue","webpack:///./src/views/UpdateAccount.vue?1d43","webpack:///./src/views/UpdateAccount.vue?3826","webpack:///./src/views/UpdateAccount.vue?f63a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","staticClass","_v","align-h","md","variant","show","showFailure","_s","failureMessage","_l","input","key","label","_f","type","placeholder","model","value","formData","callback","$$v","$set","expression","required","repeatPassword","_e","drop-placeholder","accept","profile_image","on","click","validateFormToShowModal","centered","title","ok","$event","preventDefault","handlePasswordCheck","showModal","currentPassword","staticRenderFns","UpdateAccountvue_type_script_lang_js_","props","sessionData","Object","data","username","email","firstName","lastName","password","created","userinfo","methods","_this","axios_default","method","url","$hostname","then","response","status","handleSubmit","console","log","catch","err","_this2","submitObject","FormData","append","stringify_default","headers","content-Type","$emit","filters","capitalize","toString","charAt","toUpperCase","slice","colonize","wordify","startOfLastWord","returnValue","i","length","substring","inputType","computed","isPasswordProvided","views_UpdateAccountvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UpdateAccount_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UpdateAccount_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-007bc91e.19deaf36.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"h2 text-left title-text\"},[_vm._v(\"Update your information:\")]),_c('hr'),_c('b-row',{attrs:{\"align-h\":\"center\"}},[_c('b-col',{attrs:{\"md\":\"8\"}},[_c('b-card',[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.showFailure}},[_vm._v(_vm._s(_vm.failureMessage))]),_c('b-form',[_vm._l((_vm.formData),function(input,key){return _c('div',{key:key},[_c('b-form-group',{attrs:{\"label\":_vm._f(\"colonize\")(_vm._f(\"capitalize\")(_vm._f(\"wordify\")(key)))}},[_c('b-form-input',{attrs:{\"type\":_vm._f(\"inputType\")(key),\"placeholder\":input},model:{value:(_vm.formData[key]),callback:function ($$v) {_vm.$set(_vm.formData, key, $$v)},expression:\"formData[key]\"}})],1)],1)}),(_vm.formData.password)?_c('b-form-group',{attrs:{\"label\":\"Re-type password:\"}},[_c('b-form-input',{attrs:{\"type\":\"password\",\"required\":\"\"},model:{value:(_vm.repeatPassword),callback:function ($$v) {_vm.repeatPassword=$$v},expression:\"repeatPassword\"}})],1):_vm._e(),_c('b-form-group',{attrs:{\"label\":\"Profile Image:\"}},[_c('b-form-file',{attrs:{\"placeholder\":\"Upload profile image...\",\"drop-placeholder\":\"Drop file here...\",\"accept\":\"image/*\"},model:{value:(_vm.profile_image),callback:function ($$v) {_vm.profile_image=$$v},expression:\"profile_image\"}})],1),_c('b-button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.validateFormToShowModal}},[_vm._v(\"Update\")]),_c('b-modal',{attrs:{\"centered\":\"\",\"title\":\"Please provide your current password to proceed\"},on:{\"ok\":function($event){$event.preventDefault();return _vm.handlePasswordCheck($event)}},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('b-card',[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.showFailure}},[_vm._v(_vm._s(_vm.failureMessage))]),_c('b-form-group',{attrs:{\"label\":\"Current Password\"}},[_c('b-form-input',{attrs:{\"type\":\"password\",\"required\":\"\"},model:{value:(_vm.currentPassword),callback:function ($$v) {_vm.currentPassword=$$v},expression:\"currentPassword\"}})],1)],1)],1)],2)],1)],1)],1),_c('b-row',[_c('b-col')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-container fluid>\n        <div class=\"h2 text-left title-text\">Update your information:</div>\n        <hr>\n\n        <b-row align-h=\"center\">\n            <b-col md=\"8\">\n                <b-card>\n                    <b-alert variant=\"danger\" :show=\"showFailure\">{{ failureMessage }}</b-alert>\n                <b-form>\n\n                    <div v-for=\"(input, key) in formData\" :key=\"key\">\n                            <b-form-group :label=\"key|wordify|capitalize|colonize\" \n                                >\n                                <b-form-input\n                                    :type=\"key|inputType\"\n                                    :placeholder=\"input\"\n                                    v-model=\"formData[key]\"\n                                >\n                                </b-form-input>\n                            </b-form-group>\n                    </div>\n\n                    <b-form-group \n                        v-if=\"formData.password\" \n                        label=\"Re-type password:\" \n                    >\n                        <b-form-input\n                            type=\"password\"\n                            required\n                            v-model=\"repeatPassword\"\n                        />\n                    </b-form-group>\n\n                    <b-form-group label=\"Profile Image:\">\n                        <b-form-file\n                            v-model=\"profile_image\"\n                            placeholder=\"Upload profile image...\"\n                            drop-placeholder=\"Drop file here...\"\n                            accept=\"image/*\"             \n                        >\n                        </b-form-file>\n                    </b-form-group>\n\n                    <b-button  type=\"button\" @click=\"validateFormToShowModal\">Update</b-button>  \n                    <b-modal\n                        v-model=\"showModal\"\n                        centered\n                        title= \"Please provide your current password to proceed\"\n                        @ok.prevent=\"handlePasswordCheck\"\n                        >\n                        <b-card>\n                            <b-alert variant=\"danger\" :show=\"showFailure\">{{ failureMessage }}</b-alert>\n\n                            <b-form-group \n                            label=\"Current Password\" \n                            >\n                                <b-form-input\n                                    type=\"password\"\n                                    required\n                                     v-model=\"currentPassword\"\n                                />    \n                            </b-form-group>\n                        </b-card>\n                    </b-modal>              \n                </b-form>\n               </b-card>\n            </b-col>\n        </b-row>\n        \n        <b-row >\n            <b-col>\n                 \n            </b-col>\n        </b-row>\n        \n    </b-container>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n    props:{\n        sessionData: Object\n    },\n    data: ()=>{\n        return{\n            formData: {\n                username: '',\n                email: '',\n                firstName: '',\n                lastName: '',\n                password: '',\n            },\n            profile_image:null,\n            showModal: false,\n            repeatPassword: null,\n            currentPassword: null,\n            showFailure: false,\n            failureMessage: ''\n        }\n    },\n    created: function(){\n        this.formData.username = this.sessionData.userinfo.username\n        this.formData.email = this.sessionData.userinfo.email\n        this.formData.firstName = this.sessionData.userinfo.firstName\n        this.formData.lastName = this.sessionData.userinfo.lastName\n    },\n    methods:{\n        \n        handlePasswordCheck(){\n            if(!this.currentPassword){\n                this.failureMessage = \"You must provide your current password to proceed...\"\n                this.showFailure = true\n                return\n            }\n            axios({\n                    method: 'post',\n                    url: this.$hostname+ '/login',\n                    data: { username: this.sessionData.userinfo.username, password: this.currentPassword }\n                }).then(response=>{\n                    if(response.status===200){\n                        this.handleSubmit()\n                    }else{\n                        console.log(response)\n                        this.failureMessage = \"Could not verify current password\"\n                        this.showFailure = true\n                    }\n                }).catch(err=>{\n                    this.failureMessage = \"Something's gone awry, please try again later!\"\n                    this.showFailure = true;\n                    console.log(err)\n                })\n        },\n        handleSubmit(){\n           var submitObject = new FormData()\n            submitObject.append('formData', JSON.stringify(this.formData))\n            submitObject.append('image', this.profile_image)\n            submitObject.append('username', this.sessionData.userinfo.username)\n\n           // collect the fields to update on server in submitObject\n           /*for(var field in this.formData){\n               if(this.formData[field] && this.formData[field] !== this.sessionData.userinfo[field]){\n                   submitObject[field] = this.formData[field]\n               }\n           }*/\n\n           axios({\n                    method: 'post',\n                    url: this.$hostname + '/update',\n                    headers: {\"content-Type\" : \"multipart/form-data\"},\n                    data: submitObject\n                }).then(response=>{\n                    if(response.status===200){\n                        this.$emit(\"update:sessionData\", response.data)\n                    }else{\n                        console.log(response)\n                        this.failureMessage = \"Could not update account info\"\n                        this.showFailure = true\n                    }\n                }).catch(err=>{\n                    this.failureMessage = \"Something's gone awry, please try again later!\"\n                    this.showFailure = true;\n                    console.log(err)\n                })\n           console.log(submitObject)\n           this.showModal = false\n        },\n        validateFormToShowModal(){\n            if(this.formData.password && this.formData.password !== this.repeatPassword){\n                this.failureMessage = \"Please re-type your new password (it may not match)\" \n                this.showFailure = true  \n            }\n            else{\n                this.showFailure = false\n                this.showModal = true\n            }\n        },\n\n    },\n    filters:{\n        capitalize(value){\n            if (!value) return ''\n            value = value.toString()\n            return value.charAt(0).toUpperCase() + value.slice(1)\n        },\n        colonize(value){\n\n            return value + \":\"\n        },\n        wordify(value){\n           \n            var startOfLastWord = 0\n            var returnValue = ''\n            for(var i = 0 ; i < value.length; i++){\n                \n                if(value[i] === \"_\" || value[i] === \"-\"){\n                    returnValue += value.substring(startOfLastWord, i)\n                    returnValue += \" \"\n                    i++;\n                    startOfLastWord = i\n                }\n                else if(value[i] == value.charAt(i).toUpperCase()){\n                    \n                    // substring name up to this capital\n                    returnValue += value.substring(startOfLastWord, i)\n                    returnValue += \" \"\n                    //update word start for next substring call\n                    startOfLastWord = i\n                }\n                \n            }\n            returnValue += value.substring(startOfLastWord)\n            return returnValue\n        },\n        inputType(value){\n            if(value === \"password\"){\n                return \"password\"\n            }\n            else{\n                return \"text\"\n            }\n        }\n    },\n    computed:{\n        isPasswordProvided(){\n            if(!this.formData.currentPassword){\n                return false\n            }\n            else{\n                return true\n            }\n        },\n        \n    }\n}\n</script>\n\n<style>\n.update-form{\n    margin: 10px;\n}\n</style>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateAccount.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdateAccount.vue?vue&type=template&id=6bc28e76&\"\nimport script from \"./UpdateAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdateAccount.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UpdateAccount.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateAccount.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateAccount.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}