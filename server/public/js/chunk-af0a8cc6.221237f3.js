(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af0a8cc6"],{"114b":function(t,e,s){},5118:function(t,e,s){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(a.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,s("c8ba"))},6017:function(t,e,s){(function(t,e){(function(t,s){"use strict";if(!t.setImmediate){var n,a=1,i={},r=!1,o=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?f():p()?h():t.MessageChannel?b():o&&"onreadystatechange"in o.createElement("script")?g():y(),c.setImmediate=l,c.clearImmediate=d}function l(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var r={callback:t,args:e};return i[a]=r,n(a),a++}function d(t){delete i[t]}function u(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(s,n);break}}function m(t){if(r)setTimeout(m,0,t);else{var e=i[t];if(e){r=!0;try{u(e)}finally{d(t),r=!1}}}}function f(){n=function(t){e.nextTick(function(){m(t)})}}function p(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}function h(){var e="setImmediate$"+Math.random()+"$",s=function(s){s.source===t&&"string"===typeof s.data&&0===s.data.indexOf(e)&&m(+s.data.slice(e.length))};t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(s){t.postMessage(e+s,"*")}}function b(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},n=function(e){t.port2.postMessage(e)}}function g(){var t=o.documentElement;n=function(e){var s=o.createElement("script");s.onreadystatechange=function(){m(e),s.onreadystatechange=null,t.removeChild(s),s=null},t.appendChild(s)}}function y(){n=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,s("c8ba"),s("4362"))},"713d":function(t,e,s){"use strict";var n=s("b39d"),a=s.n(n);a.a},"7cb4":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"h4 title-text"},[t._v("Your items:")]),s("hr"),s("b-card",{staticClass:"padded-card"},[s("ItemsTable",{attrs:{cart:t.sessionData.cart}})],1),s("b-card",{staticClass:"padded-card"},[s("PriceSummary",{ref:"priceSummary",attrs:{cart:t.sessionData.cart}})],1),s("b-card",{staticClass:"padded-card"},[s("div",{staticClass:"h4"},[t._v(" Choose a shipping address")]),s("b-container",{attrs:{fluid:""}},[s("b-row",t._l(t.addresses,function(e,n){return s("b-col",{key:n,attrs:{sm:"4"}},[s("b-card",{staticClass:"address-card",class:{"selected-address":t.selectedShipping===n},on:{click:function(e){t.selectedShipping=n}}},[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[s("div",{staticClass:"text-justify"},[t._v(" \n                                            "+t._s(e.firstName)+" "+t._s(e.lastName)+"\n                                            "),s("br"),t._v("\n                                            "+t._s(e.street)+"\n                                            "),s("br"),t._v("\n                                            "+t._s(e.city)+", "+t._s(e.state)+" "+t._s(e.zipcode)+"\n                                        ")])])],1)],1)],1)],1)}),1)],1)],1),s("b-card",{staticClass:"padded-card"},[s("div",{staticClass:"h4"},[t._v("Choose a billing address")]),s("b-container",{attrs:{fluid:""}},[s("b-row",t._l(t.addresses,function(e,n){return s("b-col",{key:n,attrs:{sm:"4"}},[s("b-card",{staticClass:"address-card",class:{"selected-address":t.selectedBilling===n},on:{click:function(e){t.selectedBilling=n}}},[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[s("div",{staticClass:"text-justify"},[t._v(" \n                                        "+t._s(e.firstName)+" "+t._s(e.lastName)+"\n                                        "),s("br"),t._v("\n                                        "+t._s(e.street)+"\n                                        "),s("br"),t._v("\n                                        "+t._s(e.city)+", "+t._s(e.state)+" "+t._s(e.zipcode)+"\n                                    ")])])],1)],1)],1)],1)}),1)],1)],1),s("b-card",{staticClass:"padded-card"},[s("div",{staticClass:"h4"},[t._v("Payment method")]),s("b-form-group",{attrs:{label:"Credit Card Number (not stored in this demo)"}},[s("b-form-input",{attrs:{type:"number",maxlength:"16",required:""}})],1)],1),s("div",{staticClass:"padded-card"},[s("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showInvalidWarning,callback:function(e){t.showInvalidWarning=e},expression:"showInvalidWarning"}},[t._v(" \n                "+t._s(t.warningMessage)+"\n            ")]),s("b-alert",{attrs:{variant:"success"},model:{value:t.showOrderComplete,callback:function(e){t.showOrderComplete=e},expression:"showOrderComplete"}},[t._v("\n                Thanks for your order! You'll be redirected to your order history to view the order details in 5 seconds!\n            ")]),s("b-button",{attrs:{block:""},on:{click:t.submitOrder}},[t._v("\n                    Place Order\n            ")])],1)],1)},a=[],i=s("cebc"),r=s("f499"),o=s.n(r),c=s("75fc"),l=s("bc3a"),d=s.n(l),u=s("890f"),m=s("0759"),f=s("5118"),p={props:{sessionData:Object},components:{ItemsTable:u["a"],PriceSummary:m["a"]},data:function(){return{addresses:[],selectedBilling:null,selectedShipping:null,taxRate:.05,showInvalidWarning:!1,showOrderComplete:!1}},created:function(){var t=this;d.a.get(this.$hostname+"/address/"+this.sessionData.userinfo.user_id).then(function(e){console.log(e),200===e.status?t.addresses=Object(c["a"])(e.data):console.log("aww")}).catch(function(t){console.log(t)})},computed:{isOrderValid:function(){return 0!==this.sessionData.cart.length&&(!!this.sessionData.loggedIn&&(null!==this.selectedBilling&&null!==this.selectedShipping))},warningMessage:function(){return 0===this.sessionData.cart.length?"Please add something to your cart!":this.sessionData.loggedIn?null===this.selectedBilling?"Please select a billing address":null===this.selectedShipping?"Please select a shipping address":"":"Please be logged in to perform this action"}},methods:{selectBilling:function(t){this.selectedBilling=t},submitOrder:function(){var t=this;this.isOrderValid||(this.showInvalidWarning=!0),d()({url:this.$hostname+"/orders",method:"POST",data:{cart:this.sessionData.cart.map(function(e,s){return o()(Object(i["a"])({},e,{subtotal:t.$refs.priceSummary.subtotalArray[s],tax:t.$refs.priceSummary.taxArray[s],shipping:t.$refs.priceSummary.shippingArray[s],total:t.$refs.priceSummary.subtotalArray[s]+t.$refs.priceSummary.taxArray[s]+t.$refs.priceSummary.shippingArray[s]}))}),customerDetails:o()({shippingAddress:this.addresses[this.selectedShipping],billingAddress:this.addresses[this.selectedBilling],customer:{id:this.sessionData.userinfo.user_id,username:this.sessionData.userinfo.username}})}}).then(function(e){200===e.status?d.a.delete(t.$hostname+"/cart/all").then(function(e){t.$emit("update:sessionData",{cart:e.data}),t.showOrderComplete=!0,Object(f["setTimeout"])(function(){t.$router.push("/account/ordersBought")},5e3)}):console.log(e)}).catch(function(t){console.log(t)})}}},h=p,b=(s("ae85"),s("2877")),g=Object(b["a"])(h,n,a,!1,null,null,null);e["default"]=g.exports},"890f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.cart,function(e){return s("div",{key:e.seller_id},[e.storeInfo?s("div",{staticClass:"h5 title-text"},[t._v("Items from: "+t._s(e.storeInfo.storeName)+" ")]):t._e(),s("b-table",{attrs:{items:e.items,fields:t.fields,fixed:"",responsive:""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("b-container",[s("b-row",{attrs:{"align-h":"start"}},[s("b-col",{attrs:{cols:"6"}},[s("a",{attrs:{href:"/products/item/"+e.item.id}},[s("b-img",{staticClass:"product-thumbnail",attrs:{src:t.$hostname+"/images/products/"+e.item.image}})],1)]),s("b-col",{staticStyle:{padding:"0"},attrs:{cols:"6"}},[s("div",{staticClass:"text-left"},[s("strong",[t._v(" "+t._s(e.item.name)+" ")])])])],1)],1)]}},{key:"qty",fn:function(e){return[t.dynamic?s("div",[s("b-input-group",{staticClass:"mt-3",staticStyle:{padding:"0px",margin:"0px"}},[s("b-input-group-prepend",{staticClass:"hideOnSmallScreen"},[s("b-button",{attrs:{size:"sm"},on:{click:function(s){e.item.qty--,t.updateCart(e.item.qty,e.item.id)}}},[s("font-awesome-icon",{attrs:{size:"xs",icon:"minus"}})],1)],1),s("b-form-input",{staticClass:"dynamicInput",model:{value:e.item.qty,callback:function(s){t.$set(e.item,"qty",s)},expression:"data.item.qty"}}),s("b-input-group-append",{staticClass:"hideOnSmallScreen"},[s("b-button",{attrs:{size:"sm"},on:{click:function(s){e.item.qty++,t.updateCart(e.item.qty,e.item.id)}}},[s("font-awesome-icon",{attrs:{size:"xs",icon:"plus"}})],1)],1)],1)],1):s("div",[t._v("\n                    "+t._s(e.item.qty)+"\n                ")])]}}],null,!0)})],1)}),0)},a=[],i=s("f499"),r=s.n(i),o=(s("20d6"),s("bc3a")),c=s.n(o),l={props:{cart:Array,dynamic:Boolean},data:function(){return{fields:[{key:"item",label:"Item",class:"item-col"},{key:"price",label:"Price",formatter:function(t){return t.toFixed(2)}},{key:"qty",label:"Qty"},{key:"subtotal",label:"Subtotal",formatter:function(t,e,s){return(s.qty*s.price).toFixed(2)}}]}},methods:{updateCart:function(t,e){var s,n;t<1&&(s=this.cart.findIndex(function(t){return n=t.items.findIndex(function(t){return t.id===e}),-1!==n}),this.cart[s].items.splice(n,1),console.log("this.cart[storeIndex].items :",this.cart[s].items),0===this.cart[s].items.length&&(this.cart.splice(s,1),console.log("this.cart",this.cart))),c()({method:"PUT",url:this.$hostname+"/cart",data:{cart:r()(this.cart)}}).then(function(t){}).catch(function(t){console.log("err",t)})}}},d=l,u=(s("713d"),s("2877")),m=Object(u["a"])(d,n,a,!1,null,null,null);e["a"]=m.exports},ae85:function(t,e,s){"use strict";var n=s("114b"),a=s.n(n);a.a},b39d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-af0a8cc6.221237f3.js.map